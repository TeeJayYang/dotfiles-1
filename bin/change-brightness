#!/bin/sh

[ -z "$1" ] && { echo "Error: Argument 1 must be numeric change in brightness." && exit 1; }

BRIGHTNESS_FILE="/sys/class/backlight/intel_backlight/brightness"
MAX_BRIGHTNESS_FILE="/sys/class/backlight/intel_backlight/max_brightness"

curr_brightness=$(cat $BRIGHTNESS_FILE)
min_brightness=1
max_brightness=$(cat $MAX_BRIGHTNESS_FILE)

if [ "$((curr_brightness + $1))" -gt "$max_brightness" ]; then
  curr_brightness=$max_brightness
elif [ "$((curr_brightness + $1))" -lt "$min_brightness" ]; then
  curr_brightness=$min_brightness
else
  curr_brightness=$((curr_brightness + $1))
fi

echo "echo $curr_brightness > $BRIGHTNESS_FILE" | sudo bash
